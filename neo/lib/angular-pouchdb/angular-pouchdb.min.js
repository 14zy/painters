"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="pouchdb"),function(e,t,n){"use strict";t.module("pouchdb",[]).constant("POUCHDB_METHODS",{destroy:"qify",put:"qify",post:"qify",get:"qify",remove:"qify",bulkDocs:"qify",allDocs:"qify",putAttachment:"qify",getAttachment:"qify",removeAttachment:"qify",query:"qify",viewCleanup:"qify",info:"qify",compact:"qify",revsDiff:"qify",changes:"eventEmitter",sync:"eventEmitter",replicate:{to:"eventEmitter",from:"eventEmitter"}}).service("pouchDBDecorators",["$q",function(e){this.qify=function(t){return function(){return e.when(t.apply(this,arguments))}},this.eventEmitter=function(t){return function(){var n=e.defer(),r=t.apply(this,arguments).on("change",function(e){return n.notify({change:e})}).on("paused",function(e){return n.notify({paused:e})}).on("complete",function(e){return n.resolve(e)}).on("error",function(e){return n.reject(e)});return r.$promise=n.promise,r}}}]).provider("pouchDB",["POUCHDB_METHODS",function(e){var n=this;n.methods=e,n.$get=["$window","pouchDBDecorators",function(e,r){function o(e,n,i){for(var u in n){var f=n[u];t.isString(f)?(f=r[f],i?e[i][u]=f(e[i][u]):e[u]=f(e[u])):o(e,f,u)}return e}return function(t,r){var i=new e.PouchDB(t,r);return o(i,n.methods)}}]}])}(window,window.angular);
